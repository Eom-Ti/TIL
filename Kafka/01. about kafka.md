# About Kafka
## Kafka
수십년 동안 우리는 데이터베이스를 사용해왔음. 이는 데이터베이스에 정보를 저장하는 프로그램을 의미하며, 세상을 사물의 관점에서 생각하도록 하는 바잇ㄱ이 주를 이룸.
이러한 사물들의 상태를 가져와 데이터베이스에 저장하는 방식은 효율적이었으나, 이런 생각들이 사물 -> 사건을 먼저생각하는 것이 더 낫다는 것을 알게되고 있음.
이러한 사건은 시간성이 중요하며, 이는 데이터베이스에서 관리하기가 힘들어짐. 이를 위해 이벤트가 발생하면 이를 로그에 기록하며 이는 대규모로 구축하기가 쉬웠음.
Kafka는 이러한 로그를 관리하는 시스템임. 카프카는 이벤트를 먼저 생각하고, 사물을 나중에 생각하도록 권장함.(Event)

기존의 모놀리스한 방식의 설계 방식은 더 이상의 확장이나 변경하기에 큰 어려움이 있음. 그러나 추세가 MSA(Micro Service Architecture)로 변해가며, 확장 및 변경에 용이한 구조가 되어가고 있음.
이러한 작은 각 서비스들은 Kafka를 통해 메시지를 소비하고 각 서버에서 그에 맞는 계산 혹은 로직을 수행하여, 다른 Kafka 주제로 해당 메시지를 생성하여 다른 서비스 및 기타 관심사에서 처리할 수 있도록 구성됨.
이렇게 모든 데이터가 **실시간 스트림**으로 흐르는 구조는 대규모 시스템에서의 **실시간**으로 분석하는 새로운 서비스를 구축하는 것들이 가능해짐.

또한 많은 시스템들이 얽혀있는 시스템구조에서 Kafka는 `connect`를 통해 각 외부 시스템간의 입력/출력을 담당할 수 있도록 제공하고 있음.
<img width="1826" height="1217" alt="image" src="https://github.com/user-attachments/assets/7fbe85e8-5b10-445a-b30e-f747d42f3748" />


### Broker
**Kafka Broker**는 일반적으로 `카프카`라고 불리는 시스템을 의미함. 카프카를 실행하면 카프카 서버 프로세스의 각 인스턴스(물리적 Server, Cloud instance 등)가 브로커가 됨.
이러한 Kafka Broker 가 여러개 모인 그룹이 `Kafka Cluster`를 구성하게됨.

#### 주요 역할
- **메시지 저장소**: Producer가 보낸 메시지를 디스크에 안전하게 저장
- **메시지 전달**: Consumer 요청에 따라 저장된 메시지를 전송
- **파티션 관리**: 토픽의 파티션들을 분산 저장하고 관리
- **복제 관리**: 데이터 손실 방지를 위해 다른 브로커에 데이터 복제

#### 핵심 특징
- **분산 처리**: 여러 브로커가 클러스터를 구성해 부하 분산
- **고성능**: 순차적 디스크 I/O로 높은 처리량 달성
- **내구성**: 메시지를 디스크에 영구 저장 (설정 가능한 보관 기간)
- **확장성**: 브로커 추가로 쉽게 용량과 성능 확장
- **장애 복구**: 브로커 장애 시 복제본을 통해 자동 복구
- **리더-팔로워 구조**: 각 파티션마다 하나의 리더 브로커가 읽기/쓰기 담당


### Topic
주제는 내구성 있는 방식으로 저장된 이벤트의 정렬된 컬렉션에 불과함. 이는 이벤트가 디스크에 기록되고 복제된다는 것을 의미함. 따라서 인프라가 운영되는 곳이라면
어디든 여러 개의 디스크, 여러 서버에 저장되기에 `하드웨어 오류로 인해 데이터가 사라지는 일이 없음`. 이러한 주제는 몇 시간, 몇 년, 무기한 등의 기간 동안 `데이터를 저장할 수 있음`.
### Partition
### Producer
### Consumer
### MetaData
